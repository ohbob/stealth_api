var $e=Object.defineProperty,Ve=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var re=(n,e,t)=>e in n?$e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||(e={}))ke.call(e,t)&&re(n,t,e[t]);if(z)for(var t of z(e))Pe.call(e,t)&&re(n,t,e[t]);return n},D=(n,e)=>Ve(n,et(e));var Ee=(n,e)=>{var t={};for(var r in n)ke.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&z)for(var r of z(n))e.indexOf(r)<0&&Pe.call(n,r)&&(t[r]=n[r]);return t};var f=(n,e,t)=>(re(n,typeof e!="symbol"?e+"":e,t),t),Se=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var y=(n,e,t)=>(Se(n,e,"read from private field"),t?t.call(n):e.get(n)),M=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},se=(n,e,t,r)=>(Se(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);function R(){}function G(n,e){for(const t in e)n[t]=e[t];return n}function ve(n){return n()}function Fe(){return Object.create(null)}function A(n){n.forEach(ve)}function oe(n){return typeof n=="function"}function L(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function tt(n){return Object.keys(n).length===0}function J(n,...e){if(n==null)return R;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function P(n){let e;return J(n,t=>e=t)(),e}function rn(n,e,t){n.$$.on_destroy.push(J(e,t))}function ie(n,e,t,r){if(n){const s=xe(n,e,t,r);return n[0](s)}}function xe(n,e,t,r){return n[1]&&r?G(t.ctx.slice(),n[1](r(e))):t.ctx}function le(n,e,t,r){if(n[2]&&r){const s=n[2](r(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],i=Math.max(e.dirty.length,s.length);for(let l=0;l<i;l+=1)o[l]=e.dirty[l]|s[l];return o}return e.dirty|s}return e.dirty}function ce(n,e,t,r,s,o){if(s){const i=xe(e,t,r,o);n.p(i,s)}}function ae(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Ce(n){return n&&oe(n.destroy)?n.destroy:R}function sn(n,e){n.appendChild(e)}function k(n,e,t){n.insertBefore(e,t||null)}function N(n){n.parentNode.removeChild(n)}function on(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function Ue(n){return document.createElement(n)}function Ae(n){return document.createTextNode(n)}function nt(){return Ae(" ")}function O(){return Ae("")}function ln(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function rt(n){return Array.from(n.childNodes)}function cn(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function st(n,e,t,r){n.style.setProperty(e,t,r?"important":"")}function an(n,e,t){n.classList[t?"add":"remove"](e)}let K;function X(n){K=n}function ue(){if(!K)throw new Error("Function called outside component initialization");return K}function ot(n){ue().$$.on_destroy.push(n)}function Oe(n,e){ue().$$.context.set(n,e)}function Q(n){return ue().$$.context.get(n)}const B=[],je=[],Y=[],Ie=[],it=Promise.resolve();let fe=!1;function lt(){fe||(fe=!0,it.then(He))}function he(n){Y.push(n)}let de=!1;const me=new Set;function He(){if(!de){de=!0;do{for(let n=0;n<B.length;n+=1){const e=B[n];X(e),ct(e.$$)}for(X(null),B.length=0;je.length;)je.pop()();for(let n=0;n<Y.length;n+=1){const e=Y[n];me.has(e)||(me.add(e),e())}Y.length=0}while(B.length);for(;Ie.length;)Ie.pop()();fe=!1,de=!1,me.clear()}}function ct(n){if(n.fragment!==null){n.update(),A(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(he)}}const Z=new Set;let F;function j(){F={r:0,c:[],p:F}}function I(){F.r||A(F.c),F=F.p}function _(n,e){n&&n.i&&(Z.delete(n),n.i(e))}function b(n,e,t,r){if(n&&n.o){if(Z.has(n))return;Z.add(n),F.c.push(()=>{Z.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}}function ge(n,e){const t={},r={},s={$$scope:1};let o=n.length;for(;o--;){const i=n[o],l=e[o];if(l){for(const c in i)c in l||(r[c]=1);for(const c in l)s[c]||(t[c]=l[c],s[c]=1);n[o]=l}else for(const c in i)s[c]=1}for(const i in r)i in t||(t[i]=void 0);return t}function pe(n){return typeof n=="object"&&n!==null?n:{}}function x(n){n&&n.c()}function E(n,e,t,r){const{fragment:s,on_mount:o,on_destroy:i,after_update:l}=n.$$;s&&s.m(e,t),r||he(()=>{const c=o.map(ve).filter(oe);i?i.push(...c):A(c),n.$$.on_mount=[]}),l.forEach(he)}function S(n,e){const t=n.$$;t.fragment!==null&&(A(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function at(n,e){n.$$.dirty[0]===-1&&(B.push(n),lt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function $(n,e,t,r,s,o,i,l=[-1]){const c=K;X(n);const a=n.$$={fragment:null,ctx:null,props:o,update:R,not_equal:s,bound:Fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Fe(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};i&&i(a.root);let u=!1;if(a.ctx=t?t(n,e.props||{},(h,m,...d)=>{const g=d.length?d[0]:m;return a.ctx&&s(a.ctx[h],a.ctx[h]=g)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](g),u&&at(n,h)),m}):[],a.update(),u=!0,A(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const h=rt(e.target);a.fragment&&a.fragment.l(h),h.forEach(N)}else a.fragment&&a.fragment.c();e.intro&&_(n.$$.fragment),E(n,e.target,e.anchor,e.customElement),He()}X(c)}class V{$destroy(){S(this,1),this.$destroy=R}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!tt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const H=[];function ut(n,e){return{subscribe:ee(n,e).subscribe}}function ee(n,e=R){let t;const r=new Set;function s(l){if(L(n,l)&&(n=l,t)){const c=!H.length;for(const a of r)a[1](),H.push(a,n);if(c){for(let a=0;a<H.length;a+=2)H[a][0](H[a+1]);H.length=0}}}function o(l){s(l(n))}function i(l,c=R){const a=[l,c];return r.add(a),r.size===1&&(t=e(s)||R),l(n),()=>{r.delete(a),r.size===0&&(t(),t=null)}}return{set:s,update:o,subscribe:i}}function Te(n,e,t){const r=!Array.isArray(n),s=r?[n]:n,o=e.length<2;return ut(t,i=>{let l=!1;const c=[];let a=0,u=R;const h=()=>{if(a)return;u();const d=e(r?c[0]:c,i);o?i(d):u=oe(d)?d:R},m=s.map((d,g)=>J(d,w=>{c[g]=w,a&=~(1<<g),l&&h()},()=>{a|=1<<g}));return l=!0,h(),function(){A(m),u()}})}var W;class te{constructor(e,t,r){M(this,W,{});this.route=e,this.node=t,this.load=void 0,this.urlFragment=r,Object.defineProperty(this,"route",{enumerable:!1})}get params(){return y(this,W)}setParams(e){se(this,W,e)}getParamsFromFragment(){const{getFieldsFromName:e,getValuesFromPath:t,mapFieldsWithValues:r}=this.route.router.instance.utils;return r(e(this.node.name),t(this.node.regex,this.urlFragment))}}W=new WeakMap;const ft=n=>n.name.match(/\[\.\.\.(.+)\]/)?1:-1,ht=n=>{var e;for(const t of[...n].reverse())for(const r of((e=t.node.parent)==null?void 0:e.children)||[])if(r.name.match(/\[\.\.\.(.+)\]/))return r},dt=n=>n.replace(/[?#].+/,"").replace(/\/$/,"").split("/").slice(1),mt=(n,e)=>n.findIndex(t=>t.node===e),gt=["pushState","replaceState","popState"];class pt{constructor(e,t,r){f(this,"allFragments",[]);f(this,"loaded");f(this,"invalid",null);if(this.router=e,this.url=t,this.mode=r,!e.rootNode){this.router.log.error("Can't navigate without a rootNode");const s=new Error("Can't navigate without a rootNode");throw Object.assign(s,{routify:{router:e}}),s}if(!gt.includes(r))throw new Error("url.mode must be pushState, replaceState or popState");this.allFragments=this._createFragments()}get fragments(){return this.allFragments.filter(e=>e.node.module)}get params(){const e=this.url.match(/\?.+/),t=e&&e[0];return Object.assign({},...this.allFragments.map(r=>r.params),t&&this.router.queryHandler.parse(t))}async loadRoute(){const{router:e}=this,t=[this.runBeforeUrlChangeHooks,this.loadComponents,this.runGuards,this.runPreloads];return this.loaded=new Promise(async(r,s)=>{for(const l of t){const c=await l.bind(this)(),a=this!==e.pendingRoute.get();if(a?e.pendingRoute.get().loaded.then(r).catch(s):c||(e.pendingRoute.set(null),s("pretask failed")),!c||a)return}const o=this.router.activeRoute.get();o&&e.history.push(o),e.activeRoute.set(this);const i=[...e.history].reverse();e.afterUrlChange.run({route:this},i),e.pendingRoute.set(null),r({route:this})}),this.loaded}async loadComponents(){return await Promise.all(this.fragments.map(async e=>{const t=await e.node.module();e.node.module=()=>t})),!0}async runPreloads(){const e={route:this,node:[...this.fragments].pop().node},t=this.fragments.filter(r=>{var s;return(s=r.node.module())==null?void 0:s.load}).map(async r=>r.load=await r.node.module().load(e));return await Promise.all(t),!0}async runGuards(){const e=this.fragments.map(t=>t.node.module()).filter(t=>t==null?void 0:t.guard);for(const t of e)if(!await t.guard(this)||this.invalid)return!1;return!0}async runBeforeUrlChangeHooks(){return await this.router.beforeUrlChange.run({route:this})}_createFragments(){const{url:e="",router:t}=this,{rootNode:r}=t;let s=[],o=r;const i=(u,h,m)=>{const d=new te(this,u,h),g=u.name.match(/\[\.\.\.(.+)\]/);return g?m.push(h):m=[],g?d.setParams({[g[1]]:m}):d.setParams(d.getParamsFromFragment()),d},l=dt(e),c=[new te(this,o,"")];for(let u=0;u<l.length;u++){const h=l[u],m=o.children.filter(g=>!g.name.startsWith("_")),d=m.find(g=>g.name===h)||m.sort(ft).find(g=>g.regex.test(h));if(d)c.push(i(d,h,s)),o=d;else if(s.length)s.push(h);else{const g=ht(c);if(g){const w=mt(c,g),T=c.splice(w);u=u-T.length,c.push(i(g,l[u],s)),o=g}else{const w=o._fallback;if(!w)throw new Error(`router: "${t.name||"[default]"}" could not find route: ${e}`);c.splice(w.level),c.push(new te(this,w,""));break}}}let a=c[c.length-1].node;for(;a;)a=a.children.find(u=>u.name==="index"),a&&c.push(new te(this,a,""));if(!c.filter(({node:u})=>u.module).length)throw new Error(`could not find route: ${e}`);return c}}const _t=n=>{const e=n.target.closest("a"),t=e&&e.href;if(n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.button||n.key&&n.key!=="Enter"||n.defaultPrevented||!t||e.target||e.host!==location.host)return;const r=new URL(t),s=r.pathname+r.search+r.hash;return n.preventDefault(),s},bt=(n,e={},t)=>(Object.entries(e).forEach(([r,s])=>{n.includes(`[${r}]`)&&(n=n.replace(`[${r}]`,s),delete e[r])}),n+t(e)),wt=n=>[...n].reduce((e,[t,r])=>(e[t]=r,e),{}),yt=()=>(({pathname:n,search:e,hash:t})=>n+e+t)(window.location),Le={get router(){return Q("routify-fragment-context").route.router},get fragment(){return Q("routify-fragment-context")}},Rt=n=>{try{return Q(n)}catch{}},Be=(n,e)=>{const t=ee(n,e);return Object.assign(t,{get:()=>P(t)})},Nt=(...n)=>n.map(e=>JSON.stringify([e==null?void 0:e.allFragments,e==null?void 0:e.url])).reduce((e,t)=>e===t&&t);class qe{constructor(e){this.router=e,this.log=this.router.log}install(){}uninstall(){}reflect(){}}const kt=()=>new Promise(requestAnimationFrame),Pt=(n=100)=>new Promise(e=>{let t;const r=async s=>{clearTimeout(t),await kt(),t=setTimeout(()=>{e(),removeEventListener("scroll",r)},n)};addEventListener("scroll",r)}),_e=ee(!1),Et=({route:n},e)=>{var l;const[t,r]=n.url.split("#"),[s,o]=((l=e[0])==null?void 0:l.url.split("#"))||[];if(!r)return;const i=async c=>{const a=t===s,u=document.getElementById(r);if(u&&u.scrollIntoView({behavior:a?"smooth":"auto"}),a&&u&&(_e.set(!0),await Pt(),_e.set(!1)),!a&&!c){const h=new MutationObserver(i);h.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),setTimeout(h.disconnect.bind(h),500)}};i()},St={isScrolling:_e,run:Et},vt=n=>{const e=(n==null?void 0:n.delimiter)||";";return{toRouter:(t,r)=>{const s=r.name?`${r.name}=(.+?)`:"(.+?)",o=new RegExp(`(^|${e})${s}(${e}|$)`),i=t.match(o);return i?i[2]:"/"},toBrowser:t=>t.map(r=>(r.name?`${r.name}=`:"")+r.url.external()).join(e)}};class Ft{constructor(){f(this,"instances",[]);f(this,"browserAdapter",vt());f(this,"urlFromBrowser",e=>this.browserAdapter.toRouter(yt(),e));typeof window!="undefined"&&(window.__routify=this)}get routers(){return[].concat(...this.instances.map(e=>e.routers))}register(e){return this.instances.push(e),this}}const be=new Ft,xt=/\[(.+?)\]/gm;class Ct{constructor(e=xt){f(this,"getFieldsFromName",e=>[...e.matchAll(this.RE)].map(t=>t[1]));f(this,"getRegexFromName",e=>new RegExp("^"+e.replace(this.RE,"(.+)")+"$"));f(this,"getValuesFromPath",(e,t)=>(t.match(e)||[]).slice(1));f(this,"mapFieldsWithValues",(e,t)=>this.haveEqualLength(e,t)&&e.reduce((r,s,o)=>(r[s]=t[o],r),{}));f(this,"haveEqualLength",(e,t)=>{if(e.length!==t.length)throw new Error(`fields and values should be of same length
fields: ${JSON.stringify(e)}
values: ${JSON.stringify(t)}`);return!0});this.RE=e}}class We{constructor(e,t,r){f(this,"instance");f(this,"parent");f(this,"meta",{});f(this,"id");this.instance=r,this.name=e,r.nodeIndex.push(this),this.module=t,Object.defineProperty(this,"Instance",{enumerable:!1}),Object.defineProperty(this,"instance",{enumerable:!1}),Object.defineProperty(this,"parent",{enumerable:!1})}appendChild(e){e.parent=this}createChild(e,t){const r=this.instance.createNode(e,t);return this.appendChild(r),r}get descendants(){return this.instance.nodeIndex.filter(e=>e.ancestors.find(t=>t===this))}remove(){const{nodeIndex:e}=this.instance,t=e.findIndex(r=>r===this);e.splice(t,1)}get ancestors(){let e=this;const t=[];for(;e=e.parent;)t.push(e);return t}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get isRoot(){return this===this.root}get children(){return this.instance.nodeIndex.filter(e=>e.parent===this)}get level(){var e;return(((e=this.parent)==null?void 0:e.level)||0)+1}traverse(e){const t=e.startsWith("/")?this.root:this,r=e.split("/").filter(s=>s!==".").filter(Boolean);try{return r.reduce((o,i)=>i===".."?o.parent:o.children.find(l=>l.name===i),t)}catch(s){console.error("can't resolve path",e,"from",this.path,`
`,s)}}toJSON(){return D(U({},this),{children:[...this.children]})}get path(){return"/"+[this,...this.ancestors].reverse().map(e=>e.name).filter(Boolean).join("/")}}function Ut(n){let e;const t=n[4].default,r=ie(t,n,n[5],null);return{c(){r&&r.c()},m(s,o){r&&r.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o&32)&&ce(r,t,s,s[5],e?le(t,s[5],o,null):ae(s[5]),null)},i(s){e||(_(r,s),e=!0)},o(s){b(r,s),e=!1},d(s){r&&r.d(s)}}}function At(n){let e,t,r=n[2]&&ze(n);return{c(){r&&r.c(),e=O()},m(s,o){r&&r.m(s,o),k(s,e,o),t=!0},p(s,o){s[2]?r?(r.p(s,o),o&4&&_(r,1)):(r=ze(s),r.c(),_(r,1),r.m(e.parentNode,e)):r&&(j(),b(r,1,1,()=>{r=null}),I())},i(s){t||(_(r),t=!0)},o(s){b(r),t=!1},d(s){r&&r.d(s),s&&N(e)}}}function ze(n){let e,t;const r=[n[1],{context:n[3]}];let s={$$slots:{default:[Ot]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)s=G(s,r[o]);return e=new n[2]({props:s}),{c(){x(e.$$.fragment)},m(o,i){E(e,o,i),t=!0},p(o,i){const l=i&10?ge(r,[i&2&&pe(o[1]),i&8&&{context:o[3]}]):{};i&32&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){b(e.$$.fragment,o),t=!1},d(o){S(e,o)}}}function Ot(n){let e;const t=n[4].default,r=ie(t,n,n[5],null);return{c(){r&&r.c()},m(s,o){r&&r.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o&32)&&ce(r,t,s,s[5],e?le(t,s[5],o,null):ae(s[5]),null)},i(s){e||(_(r,s),e=!0)},o(s){b(r,s),e=!1},d(s){r&&r.d(s)}}}function jt(n){let e,t,r,s;const o=[At,Ut],i=[];function l(c,a){return c[0].module?0:1}return e=l(n),t=i[e]=o[e](n),{c(){t.c(),r=O()},m(c,a){i[e].m(c,a),k(c,r,a),s=!0},p(c,[a]){let u=e;e=l(c),e===u?i[e].p(c,a):(j(),b(i[u],1,1,()=>{i[u]=null}),I(),t=i[e],t?t.p(c,a):(t=i[e]=o[e](c),t.c()),_(t,1),t.m(r.parentNode,r))},i(c){s||(_(t),s=!0)},o(c){b(t),s=!1},d(c){i[e].d(c),c&&N(r)}}}const De="routify-fragment-context";function It(n,e,t){let{$$slots:r={},$$scope:s}=e,{node:o}=e,{passthrough:i}=e;const l=D(U({},Q(De)),{node:o});Oe(De,l);let c;return o.module&&o.getRawComponent().then(a=>t(2,c=a)),n.$$set=a=>{"node"in a&&t(0,o=a.node),"passthrough"in a&&t(1,i=a.passthrough),"$$scope"in a&&t(5,s=a.$$scope)},[o,i,c,l,r,s]}class Ht extends V{constructor(e){super();$(this,e,It,jt,L,{node:0,passthrough:1})}}var C;class Tt extends We{constructor(){super(...arguments);M(this,C,{});f(this,"importTree",e=>{const t=[[this,e]];for(;t.length;){const[s,o]=t.pop(),r=o,{children:i}=r,l=Ee(r,["children"]);Object.assign(s,l);for(const c of i){const a=s.createChild(o.name||o.rootName||"");t.push([a,c])}}return this})}get regex(){const{name:e}=this;return y(this,C)[e]||(y(this,C)[e]=this.instance.utils.getRegexFromName(this.name)),y(this,C)[e]}set regex(e){y(this,C)[this.name]=new RegExp(e)}get children(){return this.instance.nodeIndex.filter(t=>t.parent===this).sort((t,r)=>(t.meta.order||0)-(r.meta.order||0))}get pages(){return this.children.filter(e=>e.name!=="index").filter(e=>!e.meta.fallback).filter(e=>!e.name.startsWith("_")).filter(e=>!e.name.includes("[")).filter(e=>{var t;return((t=e.meta)==null?void 0:t.order)!==!1})}getRawComponent(){return this.module&&new Promise(e=>{const t=this.module(),r=t.then?t.then(s=>s.default):t.default;e(r)})}get component(){const e=this;return function(t){return t.props=D(U({},t.props),{passthrough:t.props,node:e}),new Ht(U({},t))}}appendChild(e){e.instance&&(e.parent=this)}get _fallback(){var e;return this.children.find(t=>t.meta.fallback)||((e=this.parent)==null?void 0:e._fallback)}}C=new WeakMap;class Lt{constructor(e){f(this,"Node",We);f(this,"mode","runtime");f(this,"nodeIndex",[]);f(this,"rootNodes",{})}createNode(e,t){return new this.Node(e,t,this)}}class Bt extends Lt{constructor(e){super();f(this,"Node",Tt);f(this,"mode","runtime");f(this,"routers",[]);f(this,"rootNodes",{});this.options=e,e.routes&&(this.rootNodes[e.routes.rootName||"unnamed"]=this.createNode(e.routes.rootName).importTree(e.routes)),this.utils=new Ct,this.global=be.register(this),Object.defineProperty(this,"routers",{enumerable:!1}),this.log=this.global.log}}const we=n=>{const e=[],t=r=>(e.push(r),()=>e.splice(e.indexOf(r),1));return t.hooks=e,t.run=n(e),t},qt=n=>we(e=>(t,...r)=>e.reduce((s,o)=>(s==null?void 0:s.then)?s.then(i=>o(i,...r)):o(s,...r),t)),q=n=>we(e=>(t,...r)=>e.reduce((s,o)=>(s==null?void 0:s.then)?s.then(i=>o(t,...r)):o(t,...r),t)),Wt=n=>we(e=>(t,...r)=>e.reduce((s,o)=>(s==null?void 0:s.then)?s.then(i=>i&&o(i,...r)):s&&o(s,...r),t||!0));class zt extends qe{constructor(e){super(e);f(this,"reflect",()=>{const{mode:e}=P(this.router.activeRoute);if(e==="popState")return!1;const{routers:t,browserAdapter:r}=this.router.instance.global,s=t.filter(i=>i.urlReflector instanceof this.constructor),o=r.toBrowser(s);history[`${e}Native`]({},"",o)});const{instance:t,urlRewrites:r}=e,{urlFromBrowser:s,browserAdapter:o}=t.global;history.onPushstate||Dt();const i=l=>function(c,a,u){var m,d;const h=(d=(m=c==null?void 0:c.routify)==null?void 0:m.router)!=null?d:!1;if(h===!1)u=o.toRouter(u,e);else if(h!==e.name)return!1;for(const g of r)u=g.toInternal(u,{router:e});e.url[l](u)};this.absorb=()=>e.url.replace(s(e)),this._pushstateHandler=i("push"),this._replacestateHandler=i("replace"),this._popstateHandler=()=>e.url.pop(s(e))}install(){this.hooks=[history.onPushstate(this._pushstateHandler),history.onReplacestate(this._replacestateHandler),history.onPopstate(this._popstateHandler)],P(this.router.activeRoute)?this.reflect():this.absorb()}uninstall(){this.hooks.forEach(e=>e()),setTimeout(()=>this.reflect())}}function Dt(){const n={onPushstate:q(),onReplacestate:q(),onPopstate:q()};Object.assign(history,n);const{pushState:e,replaceState:t}=history;return history.pushStateNative=e,history.replaceStateNative=t,history.pushState=n.onPushstate.run,history.replaceState=n.onReplacestate.run,window.addEventListener("popstate",n.onPopstate.run),!0}class Mt extends qe{}var v;const ye=class{constructor(e){f(this,"subscribe");f(this,"set",e=>e);f(this,"pendingRoute",Be(null));f(this,"activeRoute",Be(null));M(this,v,null);f(this,"urlRewrites",[]);f(this,"beforeUrlChange",Wt());f(this,"afterUrlChange",q());f(this,"beforeRender",qt());f(this,"onDestroy",q());f(this,"parentElem",null);f(this,"queryHandler",{parse:e=>wt(new URLSearchParams(e)),stringify:e=>"?"+new URLSearchParams(e).toString()});f(this,"scrollHandler",St);f(this,"url",{internal:()=>this.url.getPending()||this.url.getActive(),external:()=>this.getExternalUrl(),getActive:()=>{var e;return(e=P(this.activeRoute))==null?void 0:e.url},getPending:()=>{var e;return(e=P(this.pendingRoute))==null?void 0:e.url},toString:()=>this.url.internal(),set:this._setUrl,push:e=>this._setUrl(e,"pushState"),replace:e=>this._setUrl(e,"replaceState"),pop:e=>this._setUrl(e,"popState")});f(this,"ready",(()=>new Promise(e=>{let t;t=this.activeRoute.subscribe(r=>{r&&e(),t&&t()})}))());f(this,"history",[]);f(this,"setParentElem",e=>this.parentElem=e);f(this,"getExternalUrl",e=>this.urlRewrites.reduce((t,r)=>r.toExternal(t,{router:this}),e||this.url.internal()));f(this,"getInternalUrl",e=>this.urlRewrites.reduce((t,r)=>r.toInternal(t,{router:this}),e));Object.assign(this,ee(this)),this.init(e),this.params=Te(this.activeRoute,t=>t.params),this.afterUrlChange(()=>{setTimeout(()=>y(this,v).reflect())}),this.afterUrlChange(this.scrollHandler.run),this.activeRoute.get=()=>P(this.activeRoute),this.pendingRoute.get=()=>P(this.pendingRoute)}init({instance:e,rootNode:t,name:r,routes:s,urlRewrite:o,urlReflector:i,url:l,passthrough:c,beforeUrlChange:a,afterUrlChange:u,beforeRender:h}={}){const m=Rt("routify-fragment-context");this.instance=e||this.instance||(m==null?void 0:m.route.router.instance)||be.instances[0]||new Bt({}),this.name=r||this.name||"",this.urlRewrites=[o].flat().filter(Boolean),c&&!(c instanceof ye)&&(c=(m==null?void 0:m.route.router)||c),this.passthrough=c||this.passthrough,be.instances.forEach(d=>{const g=d.routers.indexOf(this);g!==-1&&d.routers.splice(g,1)}),a&&this.beforeUrlChange(a),u&&this.afterUrlChange(u),h&&this.beforeRender(h),this.instance.routers.push(this),s&&this.importRoutes(s),this.parentCmpCtx=m,this.rootNode=t||this.rootNode||this.instance.rootNodes.default,this.set(this),this.url.getActive()&&this._setUrl(this.url.getActive(),"pushState",!0),this.urlReflector||(i=i||(typeof window!="undefined"?zt:Mt),this.setUrlReflector(i)),l&&this.url.replace(l)}importRoutes(e){this.rootNode=this.instance.createNode().importTree(e),this.instance.rootNodes[e.rootName||"unnamed"]=this.rootNode}async _setUrl(e,t,r){r||(e=this.getInternalUrl(e)),e=e||"/",e=e.replace(/(.+)\/+([#?]|$)/,"$1$2");const{activeRoute:s,pendingRoute:o}=this;s.get(),e.startsWith("/")||(e=e.replace(new URL(e).origin,""));const i=new pt(this,e,t),l=o.get()||s.get();return Nt(l,i)||(o.set(i),await i.loadRoute()),!0}destroy(){this.instance.routers=this.instance.routers.filter(e=>e!==this),this.onDestroy.run({router:this})}get urlReflector(){return y(this,v)}setUrlReflector(e){var t;(t=y(this,v))==null||t.uninstall(),se(this,v,new e(this)),y(this,v).install()}};let Me=ye;v=new WeakMap;function Gt(n){let e;const t=n[2].default,r=ie(t,n,n[1],null);return{c(){r&&r.c()},m(s,o){r&&r.m(s,o),e=!0},p(s,[o]){r&&r.p&&(!e||o&2)&&ce(r,t,s,s[1],e?le(t,s[1],o,null):ae(s[1]),null)},i(s){e||(_(r,s),e=!0)},o(s){b(r,s),e=!1},d(s){r&&r.d(s)}}}function Jt(n,e,t){let{$$slots:r={},$$scope:s}=e,{context:o=null}=e;return n.$$set=i=>{"context"in i&&t(0,o=i.context),"$$scope"in i&&t(1,s=i.$$scope)},[o,s,r]}class Ge extends V{constructor(e){super();$(this,e,Jt,Gt,L,{context:0})}}function Je(n){let e,t;const r=[{fragments:n[5]},n[4],{props:n[1]},{decorator:n[0]}];let s={};for(let o=0;o<r.length;o+=1)s=G(s,r[o]);return e=new Ke({props:s}),{c(){x(e.$$.fragment)},m(o,i){E(e,o,i),t=!0},p(o,i){const l=i&51?ge(r,[i&32&&{fragments:o[5]},i&16&&pe(o[4]),i&2&&{props:o[1]},i&1&&{decorator:o[0]}]):{};e.$set(l)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){b(e.$$.fragment,o),t=!1},d(o){S(e,o)}}}function Kt(n){let e,t,r=n[5].length&&Je(n);return{c(){r&&r.c(),e=O()},m(s,o){r&&r.m(s,o),k(s,e,o),t=!0},p(s,o){s[5].length?r?(r.p(s,o),o&32&&_(r,1)):(r=Je(s),r.c(),_(r,1),r.m(e.parentNode,e)):r&&(j(),b(r,1,1,()=>{r=null}),I())},i(s){t||(_(r),t=!0)},o(s){b(r),t=!1},d(s){r&&r.d(s),s&&N(e)}}}function Xt(n){let e,t,r;const s=[{context:n[2]},n[1]];var o=n[3].node.module().default;function i(l){let c={$$slots:{default:[Kt,({props:a,decorator:u})=>({1:a,0:u}),({props:a,decorator:u})=>(a?2:0)|(u?1:0)]},$$scope:{ctx:l}};for(let a=0;a<s.length;a+=1)c=G(c,s[a]);return{props:c}}return o&&(e=new o(i(n))),{c(){e&&x(e.$$.fragment),t=O()},m(l,c){e&&E(e,l,c),k(l,t,c),r=!0},p(l,c){const a=c&6?ge(s,[c&4&&{context:l[2]},c&2&&pe(l[1])]):{};if(c&563&&(a.$$scope={dirty:c,ctx:l}),o!==(o=l[3].node.module().default)){if(e){j();const u=e;b(u.$$.fragment,1,0,()=>{S(u,1)}),I()}o?(e=new o(i(l)),x(e.$$.fragment),_(e.$$.fragment,1),E(e,t.parentNode,t)):e=null}else o&&e.$set(a)},i(l){r||(e&&_(e.$$.fragment,l),r=!0)},o(l){e&&b(e.$$.fragment,l),r=!1},d(l){l&&N(t),e&&S(e,l)}}}function Qt(n){let e,t,r;var s=n[0]||Ge;function o(i){return{props:{context:i[2],$$slots:{default:[Xt]},$$scope:{ctx:i}}}}return s&&(e=new s(o(n))),{c(){e&&x(e.$$.fragment),t=O()},m(i,l){e&&E(e,i,l),k(i,t,l),r=!0},p(i,[l]){const c={};if(l&4&&(c.context=i[2]),l&575&&(c.$$scope={dirty:l,ctx:i}),s!==(s=i[0]||Ge)){if(e){j();const a=e;b(a.$$.fragment,1,0,()=>{S(a,1)}),I()}s?(e=new s(o(i)),x(e.$$.fragment),_(e.$$.fragment,1),E(e,t.parentNode,t)):e=null}else s&&e.$set(c)},i(i){r||(e&&_(e.$$.fragment,i),r=!0)},o(i){e&&b(e.$$.fragment,i),r=!1},d(i){i&&N(t),e&&S(e,i)}}}function Yt(n,e,t){let r,s,o,i,l,{fragments:c}=e,{decorator:a=null}=e,{props:u={}}=e,h={};return Oe("routify-fragment-context",h),n.$$set=m=>{"fragments"in m&&t(6,c=m.fragments),"decorator"in m&&t(0,a=m.decorator),"props"in m&&t(1,u=m.props)},n.$$.update=()=>{n.$$.dirty&64&&t(3,[r,...s]=[...c],r,(t(5,s),t(6,c))),n.$$.dirty&8&&t(7,{node:o,load:i,route:l}=r,o,(t(4,i),t(3,r),t(6,c)),(t(8,l),t(3,r),t(6,c))),n.$$.dirty&412&&t(2,h=Object.assign(h,{route:l,node:o,load:i,fragment:r}))},[a,u,h,r,i,s,c,o,l]}class Ke extends V{constructor(e){super();$(this,e,Yt,Qt,L,{fragments:6,decorator:0,props:1})}}function Xe(n){let e,t,r,s,o,i;return t=new Ke({props:{fragments:n[2],decorator:n[1]}}),{c(){e=Ue("div"),x(t.$$.fragment),st(e,"display","contents")},m(l,c){k(l,e,c),E(t,e,null),s=!0,o||(i=Ce(r=n[5].call(null,e)),o=!0)},p(l,c){const a={};c&4&&(a.fragments=l[2]),c&2&&(a.decorator=l[1]),t.$set(a)},i(l){s||(_(t.$$.fragment,l),s=!0)},o(l){b(t.$$.fragment,l),s=!1},d(l){l&&N(e),S(t),o=!1,i()}}}function Qe(n){let e,t,r,s;return{c(){e=Ue("div")},m(o,i){k(o,e,i),r||(s=Ce(t=n[0].setParentElem(e)),r=!0)},d(o){o&&N(e),r=!1,s()}}}function Zt(n){let e,t,r,s=n[3]&&Xe(n),o=!n[0].parentElem&&Qe(n);return{c(){s&&s.c(),e=nt(),o&&o.c(),t=O()},m(i,l){s&&s.m(i,l),k(i,e,l),o&&o.m(i,l),k(i,t,l),r=!0},p(i,[l]){i[3]?s?(s.p(i,l),l&8&&_(s,1)):(s=Xe(i),s.c(),_(s,1),s.m(e.parentNode,e)):s&&(j(),b(s,1,1,()=>{s=null}),I()),i[0].parentElem?o&&(o.d(1),o=null):o||(o=Qe(i),o.c(),o.m(t.parentNode,t))},i(i){r||(_(s),r=!0)},o(i){b(s),r=!1},d(i){s&&s.d(i),i&&N(e),o&&o.d(i),i&&N(t)}}}function $t(n,e,t){let r,s,o,i=R,l=()=>(i(),i=J(r,p=>t(3,o=p)),r);n.$$.on_destroy.push(()=>i());let{urlReflector:c=null}=e,{instance:a=null}=e,{urlRewrite:u=null}=e,{url:h=null}=e,{name:m=""}=e,{router:d=null}=e,{routes:g=null}=e,{decorator:w=null}=e,{rootNode:T=null}=e,{passthrough:ne=!1}=e;const Ze=p=>{d.passthrough||(p.addEventListener("click",Re),p.addEventListener("keydown",Re))},Re=p=>{const Ne=_t(p);Ne&&d.url.push(Ne)};return typeof window!="undefined"&&ot(()=>d.destroy()),n.$$set=p=>{"urlReflector"in p&&t(6,c=p.urlReflector),"instance"in p&&t(7,a=p.instance),"urlRewrite"in p&&t(8,u=p.urlRewrite),"url"in p&&t(9,h=p.url),"name"in p&&t(10,m=p.name),"router"in p&&t(0,d=p.router),"routes"in p&&t(11,g=p.routes),"decorator"in p&&t(1,w=p.decorator),"rootNode"in p&&t(12,T=p.rootNode),"passthrough"in p&&t(13,ne=p.passthrough)},n.$$.update=()=>{if(n.$$.dirty&15809){const p={instance:a,rootNode:T,name:m,routes:g,urlRewrite:u,urlReflector:c,passthrough:ne};d?d.init(p):t(0,d=new Me(p))}n.$$.dirty&513&&h&&h!==d.url.internal()&&d.url.replace(h),n.$$.dirty&1&&l(t(4,r=d.activeRoute)),n.$$.dirty&9&&t(2,s=o&&d.beforeRender.run(o.fragments||[])),n.$$.dirty&5},[d,w,s,o,r,Ze,c,a,u,h,m,g,T,ne]}class un extends V{constructor(e){super();$(this,e,$t,Zt,L,{urlReflector:6,instance:7,urlRewrite:8,url:9,name:10,router:0,routes:11,decorator:1,rootNode:12,passthrough:13})}}const fn={subscribe:(n,e)=>Te(Le.router.activeRoute,Vt).subscribe(n,e)},Vt=n=>en(n.url),en=n=>(e,t,r={})=>{const{recursive:s}=U({recursive:!0},r);return e=bt(e,t,o=>""),s&&(e=e.replace(/\/index\/?$/,"")),(n+"/").startsWith(e+"/")},Ye=n=>({subscribe:e=>(e(n()),()=>{})}),tn=Ye(()=>Le.fragment),hn=Ye(()=>P(tn).node);export{st as A,un as R,V as S,b as a,Ae as b,x as c,S as d,Ue as e,nt as f,ln as g,k as h,$ as i,sn as j,cn as k,O as l,E as m,R as n,an as o,N as p,on as q,ie as r,L as s,_ as t,ce as u,ae as v,le as w,rn as x,hn as y,fn as z};
